(this["webpackJsonpcorona-react"]=this["webpackJsonpcorona-react"]||[]).push([[0],{64:function(e,t,a){e.exports=a(74)},69:function(e,t,a){},74:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(9),c=a.n(i),s=(a(69),a(26)),l=a(27),o=a(31),u=a(29),h=a(46),d=a(110),m=a(131),v=a(126),f=a(121),p=a(130),g=a(124),D=a(129),y=a(127),b=a(45),E=a.n(b),k=a(51),j=a.n(k),z=function(e){Object(o.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={chartData:n.prepareOptionsWithProps(e)},n}return Object(l.a)(a,[{key:"getDefaultStructure",value:function(){return{chart:{type:"line"},title:{text:""},subtitle:{text:"Source: WorldClimate.com"},xAxis:{categories:[]},yAxis:{title:{text:"Value"}},plotOptions:{line:{dataLabels:{enabled:!0},enableMouseTracking:!1}},series:[]}}},{key:"componentWillReceiveProps",value:function(e,t){this.setState({chartData:this.prepareOptionsWithProps(e)})}},{key:"prepareOptionsWithProps",value:function(e){var t=this.getDefaultStructure(),a=e.title,n=e.labels,r=e.dataset;return t.title.text=a,t.xAxis.categories=n,r.map((function(e){t.series.push({name:e.name,data:e.data})})),t}},{key:"render",value:function(){return r.a.createElement(j.a,{highcharts:E.a,options:this.state.chartData})}}]),a}(n.Component),C=a(114),O=a(117),w=a(118),S=a(119),F=a(115),V=a(120),x=a(116),B=function(e){Object(o.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={labels:e.labels,deaths:e.deaths,recovered:e.recovered,confirmed:e.confirmed},n}return Object(l.a)(a,[{key:"componentWillReceiveProps",value:function(e,t){this.setState({labels:e.labels,deaths:e.deaths,recovered:e.recovered,confirmed:e.confirmed})}},{key:"render",value:function(){var e=this.state,t=e.deaths,a=e.recovered,n=e.confirmed,i=e.labels;return r.a.createElement(d.a,{container:!0,spacing:2},r.a.createElement(C.a,{component:F.a},r.a.createElement(x.a,{size:"small","aria-label":"a dense table"},r.a.createElement(O.a,null,r.a.createElement(w.a,null,r.a.createElement(S.a,null,"Day"),t.length>0?r.a.createElement(S.a,{align:"right"},"Deaths"):null,a.length>0?r.a.createElement(S.a,{align:"right"},"Recovered"):null,n.length>0?r.a.createElement(S.a,{align:"right"},"Confirmed"):null)),r.a.createElement(V.a,null,i.map((function(e,i){return r.a.createElement(w.a,{key:e},r.a.createElement(S.a,{component:"th",scope:"row"},e),t.length>0?r.a.createElement(S.a,{align:"right"},t[i]):null,a.length>0?r.a.createElement(S.a,{align:"right"},a[i]):null,n.length>0?r.a.createElement(S.a,{align:"right"},n[i]):null)}))))))}}]),a}(n.Component),W=function(e){Object(o.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={countries:[],country:"Spain",slice:30,completeData:null,data:null,visualization:"increment",deathsDataset:!0,confirmedDataset:!1,recoveredDataset:!1,dataLoaded:!1},e.changeCountry=function(t){e.setState({country:t.target.value,data:e.buildFormattedData(e.state.completeData[t.target.value])})},e.changeDays=function(t){e.setState({slice:t.target.value})},e.switchDeathsDataset=function(t){e.setState({deathsDataset:t.target.checked})},e.switchConfirmedDataset=function(t){e.setState({confirmedDataset:t.target.checked})},e.switchRecoveredDataset=function(t){e.setState({recoveredDataset:t.target.checked})},e.handleVisualizationChange=function(t){e.setState({visualization:t.target.value})},e}return Object(l.a)(a,[{key:"fetchData",value:function(){var e=this;fetch("https://pomber.github.io/covid19/timeseries.json").then((function(e){return e.json()})).then((function(t){e.setState({completeData:t,data:e.buildFormattedData(t[e.state.country]),countries:Object.keys(t),dataLoaded:!0})}))}},{key:"fetchDataByVisualization",value:function(e,t,a){return e.map((function(e){return e[t][a]}))}},{key:"buildFormattedData",value:function(e){var t=this;return e.map((function(a,n){var r=void 0!==e[n-1]?e[n-1]:null;return{date:a.date,deaths:t.buildDataForKey(r,"deaths",a),recovered:t.buildDataForKey(r,"recovered",a),confirmed:t.buildDataForKey(r,"confirmed",a)}}))}},{key:"buildDataForKey",value:function(e,t,a){if(!e)return{absolute:a[t],percent:0,increment:0};var n=a[t]-e[t],r=parseFloat((n/e[t]*100).toFixed(3));return{absolute:a[t],percent:r,increment:n}}},{key:"componentDidMount",value:function(){var e=this;fetch("https://ipapi.co/json/").then((function(e){return e.json()})).then((function(t){e.setState({country:t.country_name},(function(){e.fetchData()}))}))}},{key:"getDataForHighCharts",value:function(){var e=[],t=this.state,a=t.data,n=t.slice,r=t.visualization,i=t.deathsDataset,c=t.recoveredDataset,s=t.confirmedDataset,l=Object(h.a)(a,"date").slice(-n);if(i){var o=this.fetchDataByVisualization(a,"deaths",r).slice(-n);e.push({name:"deaths",data:o})}if(s){var u=this.fetchDataByVisualization(a,"confirmed",r).slice(-n);e.push({name:"confirmed",data:u})}if(c){var d=this.fetchDataByVisualization(a,"recovered",r).slice(-n);e.push({name:"recovered",data:d})}return{labels:l,dataset:e}}},{key:"getDataForTable",value:function(){var e=this.state,t=e.data,a=e.slice,n=e.visualization,r=e.deathsDataset,i=e.recoveredDataset,c=e.confirmedDataset,s=Object(h.a)(t,"date").slice(-a);return{deaths:r?this.fetchDataByVisualization(t,"deaths",n).slice(-a):[],confirmed:c?this.fetchDataByVisualization(t,"confirmed",n).slice(-a):[],recovered:i?this.fetchDataByVisualization(t,"recovered",n).slice(-a):[],labels:s}}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(d.a,{container:!0,spacing:2,justify:"space-around",alignItems:"center",mb:2},r.a.createElement(m.a,{control:r.a.createElement(v.a,{checked:this.state.deathsDataset,name:"deathsDataset",color:"primary",onChange:this.switchDeathsDataset}),label:"Deaths"}),r.a.createElement(m.a,{control:r.a.createElement(v.a,{checked:this.state.recoveredDataset,name:"recoveredDataset",color:"primary",onChange:this.switchRecoveredDataset}),label:"Recovered"}),r.a.createElement(m.a,{control:r.a.createElement(v.a,{checked:this.state.confirmedDataset,name:"confirmedDataset",color:"primary",onChange:this.switchConfirmedDataset}),label:"Confirmed"})),r.a.createElement(d.a,{container:!0,spacing:2,justify:"space-around",alignItems:"center"},r.a.createElement(f.a,{size:"medium"},r.a.createElement(p.a,{id:"select-country"},"Country"),r.a.createElement(g.a,{labelId:"select-country",id:"select-country",value:this.state.country,onChange:this.changeCountry},this.state.countries.map((function(e){return r.a.createElement(D.a,{key:e,value:e},e)})))),r.a.createElement(f.a,{size:"medium"},r.a.createElement(p.a,{id:"select-visualization"},"Visualization"),r.a.createElement(g.a,{labelId:"select-visualization",id:"select-visualization",value:this.state.visualization,onChange:this.handleVisualizationChange},r.a.createElement(D.a,{key:0,value:"absolute"},"Absolute"),r.a.createElement(D.a,{key:1,value:"percent"},"Percent"),r.a.createElement(D.a,{key:2,value:"increment"},"Increment"))),r.a.createElement(y.a,{size:"medium",id:"standard-required",label:"Latest N days",value:this.state.slice,onChange:this.changeDays})),this.state.dataLoaded?r.a.createElement(z,Object.assign({title:"COVID-19 Report"},this.getDataForHighCharts())):null,this.state.dataLoaded?r.a.createElement(B,this.getDataForTable()):null)}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(W,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[64,1,2]]]);
//# sourceMappingURL=main.b0d464c3.chunk.js.map