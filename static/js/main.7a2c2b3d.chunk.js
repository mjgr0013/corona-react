(this["webpackJsonpcorona-react"]=this["webpackJsonpcorona-react"]||[]).push([[0],{59:function(e,t,a){e.exports=a(71)},64:function(e,t,a){},71:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(9),c=a.n(i),o=(a(64),a(43)),s=a(44),l=a(49),u=a(47),d=a(45),h=a.n(d),m=a(48),f=a(103),v=a(117),y=a(112),p=a(107),b=a(114),D=a(110),g=a(116),k=a(113),E=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,i=new Array(n),c=0;c<n;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).chartRef=r.a.createRef(),e.state={countries:[],country:null,slice:30,completeData:null,data:null,chart:null,visualization:"increment",deathsDataset:!0,confirmedDataset:!1,recoveredDataset:!1},e.changeCountry=function(t){console.log("cambio country"),e.setState({country:t.target.value,data:e.buildFormattedData(e.state.completeData[t.target.value])})},e.changeDays=function(t){e.setState({slice:t.target.value})},e.switchDeathsDataset=function(t){e.setState({deathsDataset:t.target.checked})},e.switchConfirmedDataset=function(t){e.setState({confirmedDataset:t.target.checked})},e.switchRecoveredDataset=function(t){e.setState({recoveredDataset:t.target.checked})},e.handleVisualizationChange=function(t){e.setState({visualization:t.target.value})},e}return Object(s.a)(a,[{key:"updateGraph",value:function(){var e=this.state,t=e.slice,a=e.data,n=e.deathsDataset,r=e.confirmedDataset,i=e.recoveredDataset,c=e.visualization,o=[],s=Object(m.a)(a,"date").slice(-t);if(r){var l=this.fetchDataByVisualization(this.state.data,"confirmed",c).slice(-t);o.push({label:"Confirmed",borderColor:"rgba(234, 237, 54)",backgroundColor:"rgba(234, 237, 54)",data:l,fill:!1})}if(n){var u=this.fetchDataByVisualization(this.state.data,"deaths",c).slice(-t);o.push({label:"Deaths",borderColor:"rgb(237,106,54)",backgroundColor:"rgb(237,106,54)",data:u,fill:!1})}if(i){var d=this.fetchDataByVisualization(this.state.data,"recovered",c).slice(-t);o.push({label:"Recovered",borderColor:"rgb(72,237,54)",backgroundColor:"rgb(72,237,54)",data:d,fill:!1})}var f={type:"line",data:{labels:s,datasets:o},options:{responsive:!0,title:{display:!0,text:"Daily general report COVID-19"},tooltips:{mode:"index",intersect:!1},hover:{mode:"nearest",intersect:!0},scales:{xAxes:[{display:!0,scaleLabel:{display:!0,labelString:"Date"}}],yAxes:[{display:!0,scaleLabel:{display:!0,labelString:"Value"}}]}}},v=this.chartRef.current.getContext("2d");this.state.chart&&this.state.chart.destroy();var y=new h.a(v,f);this.state.chart=y}},{key:"fetchData",value:function(){var e=this;fetch("https://pomber.github.io/covid19/timeseries.json").then((function(e){return e.json()})).then((function(t){e.setState({completeData:t,data:e.buildFormattedData(t.Spain),countries:Object.keys(t)})}))}},{key:"fetchDataByVisualization",value:function(e,t,a){return e.map((function(e){return e[t][a]}))}},{key:"buildFormattedData",value:function(e){var t=this;return e.map((function(a,n){var r=void 0!==e[n-1]?e[n-1]:null;return{date:a.date,deaths:t.buildDataForKey(r,"deaths",a),recovered:t.buildDataForKey(r,"recovered",a),confirmed:t.buildDataForKey(r,"confirmed",a)}}))}},{key:"buildDataForKey",value:function(e,t,a){if(!e)return{absolute:a[t],percent:0,increment:0};var n=a[t]-e[t],r=parseFloat((n/e[t]*100).toFixed(3));return{absolute:a[t],percent:r,increment:n}}},{key:"componentDidMount",value:function(){var e=this;fetch("https://ipapi.co/json/").then((function(e){return e.json()})).then((function(t){e.state.country=t.country_name,e.fetchData()}))}},{key:"componentDidUpdate",value:function(e,t,a){this.updateGraph()}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(f.a,{container:!0,spacing:2,justify:"space-around",alignItems:"center",mb:2},r.a.createElement(v.a,{control:r.a.createElement(y.a,{checked:this.state.deathsDataset,name:"deathsDataset",color:"primary",onChange:this.switchDeathsDataset}),label:"Deaths"}),r.a.createElement(v.a,{control:r.a.createElement(y.a,{checked:this.state.recoveredDataset,name:"recoveredDataset",color:"primary",onChange:this.switchRecoveredDataset}),label:"Recovered"}),r.a.createElement(v.a,{control:r.a.createElement(y.a,{checked:this.state.confirmedDataset,name:"confirmedDataset",color:"primary",onChange:this.switchConfirmedDataset}),label:"Confirmed"})),r.a.createElement(f.a,{container:!0,spacing:2,justify:"space-around",alignItems:"center"},r.a.createElement(p.a,{size:"medium"},r.a.createElement(b.a,{id:"select-country"},"Country"),r.a.createElement(D.a,{labelId:"select-country",id:"select-country",value:this.state.country,onChange:this.changeCountry},this.state.countries.map((function(e){return r.a.createElement(g.a,{key:e,value:e},e)})))),r.a.createElement(p.a,{size:"medium"},r.a.createElement(b.a,{id:"select-visualization"},"Visualization"),r.a.createElement(D.a,{labelId:"select-visualization",id:"select-visualization",value:this.state.visualization,onChange:this.handleVisualizationChange},r.a.createElement(g.a,{key:0,value:"absolute"},"Absolute"),r.a.createElement(g.a,{key:1,value:"percent"},"Percent"),r.a.createElement(g.a,{key:2,value:"increment"},"Increment"))),r.a.createElement(k.a,{size:"medium",id:"standard-required",label:"Latest N days",value:this.state.slice,onChange:this.changeDays})),r.a.createElement(f.a,{container:!0,spacing:2,justify:"space-around",alignItems:"center"},r.a.createElement("canvas",{id:"canvas",ref:this.chartRef})))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(E,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[59,1,2]]]);
//# sourceMappingURL=main.7a2c2b3d.chunk.js.map